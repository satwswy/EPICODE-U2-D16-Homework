<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
      integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn"
      crossorigin="anonymous"
    />

    <title>Hello, world!</title>
  </head>
  <body>
    <h1>Hello, world!</h1>

    <button id="getText">Get Text</button>
    <hr>
    <div id="output"></div>
    <form id="addPost">
      <div>
        <input type="text" id="name" placeholder="name">
      </div>
      <div>
        <input type="text" id="description" placeholder="description">
      </div>
      <div>
        <input type="text" id="category" placeholder="category">
      </div>
      <div>
        <input type="text" id="imageUrl" placeholder="imageUrl">
      </div>
      <input type="submit" value="Submit">
    </form>
    <script
      src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF"
      crossorigin="anonymous"
    ></script>

    <script>
      document.getElementById("getText").addEventListener("click", getText);
      document.getElementById("addPost").addEventListener("submit", addPost);
      function getText() {
        fetch("https://striveschool-api.herokuapp.com/api/movies/", {
          headers: {
            Authorization:
              "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MmE2MDUyZjMzODEzZjAwMTUwZGRkZmMiLCJpYXQiOjE2NTUxNTA0OTEsImV4cCI6MTY1NjM2MDA5MX0.HQ9iyLzEgYmGT8e10FJEwTMx2TAz_3jmcI5Klq64Iro",
          },
        })
          .then((res) => res.json())
          .then((data) => {
            console.log(data);
            document.getElementById("output").innerHTML = data;
          })
          .catch((err) => console.log(err));
      }

      function addPost(e){
        e.preventDefault();

        let name = document.getElementById('name').value;
        let description = document.getElementById('description').value;
        let category = document.getElementById('category').value;
        let imageUrl = document.getElementById('imageUrl').value;

        fetch("https://striveschool-api.herokuapp.com/api/movies/", {
          method: 'POST',
          headers: {
            'Accept' : 'application/json, text/plain, */*',
            'Content-type': 'application/json',
            Authorization:
              "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MmE2MDUyZjMzODEzZjAwMTUwZGRkZmMiLCJpYXQiOjE2NTUxNTA0OTEsImV4cCI6MTY1NjM2MDA5MX0.HQ9iyLzEgYmGT8e10FJEwTMx2TAz_3jmcI5Klq64Iro",
          },
          body: JSON.stringify({name:name, description:description, category:category, imageUrl:imageUrl})
        })
        .then((res)=>res.json())
        .then((data)=> console.log(data))
      }
    </script>
  </body>
</html>